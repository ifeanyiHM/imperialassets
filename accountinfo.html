<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      Imperial Asset Managers Limited – We are Imperial….Proudly Imperial
    </title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
  </head>
  <body class="blurred">
    <div class="overlay" id="overlay"></div>

    <!-- Popup -->

    <header>
      <div class="containers" id="header">
        <div class="logo">
          <img src="assets/IAML Logo-01.png" alt="" />
        </div>
        <div class="menu-toggle" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="links">
          <a href="login.html" class="login">Logout</a>
        </div>
      </div>
    </header>

    <style>
      .fblk p {
        color: #474747d0;
      }
      .fblk textarea {
        border: 1px solid var(--border-color);
        padding: 11px;
        width: 100%;
        margin-top: 10px;
        font-family: Poppins;
        font-size: 14px;
        font-weight: 400;
        line-height: 16.16px;
        text-align: left;
        color: var(--subtitle-color3);
        border-radius: 3px;
        resize: none;
      }
    </style>

    <script>
      function toggleMenu() {
        const links = document.querySelector(".links");
        links.classList.toggle("active");
      }
    </script>

    <div class="ovl"></div>
    <main class="hidden">
      <div class="containers etarderform" style="max-width: 794px">
        <br />
        <br />
        <h1></h1>
        <p>
          <a
            href="admindashboard.html"
            style="
              font-size: 2rem;
              display: flex;
              gap: 4px;
              align-items: center;
              color: #303030;
            "
          >
            &larr; <span style="font-size: 1.2rem">Back</span></a
          >
        </p>
        <div class="formprogress"></div>
        <br />

        <div id="content">
          <!-- <div class="kyc-form">
            <div class="form-row">
              <label>Email</label>
              <input type="text" value="${bankName}" readonly />
              <label>Country</label>
              <input type="text" value="${accountNumber}" readonly />
              <label>Marital Status</label>
              <input
                type="text"
                class="text"
                value="${accountNumber}"
                readonly
              />
            </div>
            <div class="form-row">
              <label>ID Type</label>
              <input type="text" value="${accountName}" readonly />
              <label>ID Number</label>
              <input type="text" value="${nationality}" readonly />
            </div>
            <div class="form-row img-row">
              <div class="img-container">
                <label>Live Image</label>
                <img
                  src="./assets/advisory.png"
                  alt=""
                  style="width: 100%; height: 250px"
                />
              </div>

              <div class="img-container">
                <label>Proof of Identity</label>
                <img
                  src="./assets/advisory.png"
                  alt=""
                  style="width: 100%; height: 250px"
                />
              </div>
            </div>
            <div class="form-row img-row">
              <div class="img-container">
                <label>Utility Bill</label>
                <img
                  src="./assets/advisory.png"
                  alt=""
                  style="width: 100%; height: 250px"
                />
              </div>
            </div>
          </div> -->
        </div>
        <div id="img-expand">
          <div class="container">
            <label id="close-exp">x</label>
            <img
              src="./assets/advisory.png"
              alt=""
              style="width: 100%; height: 90vh"
            />
          </div>
        </div>
        <style>
          .kyc-form {
            max-width: 794px;
          }

          .form-row input[type="text"],
          input[type="date"],
          textarea {
            flex: 1 0 190px;
          }

          .text {
            width: 154px;
          }

          #img-expand {
            display: none;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            z-index: 9999999999999999000;
          }

          #img-expand .container {
            max-width: 794px;
          }

          #close-exp {
            cursor: pointer;
            color: white;
            font-size: 1.5rem;
            border: 1px solid white;
            padding: 0 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            justify-self: end;
          }
        </style>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            // Get the customer_number from the query parameter
            const urlParams = new URLSearchParams(window.location.search);
            const customerNumber = urlParams.get("customer_number");

            function formatDate(dateObj) {
              return new Date(dateObj).toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              });
            }

            const formatString = (string) => {
              // Remove commas from the string
              const sanitizedString = string.replace(/,/g, "");
              const number = parseFloat(sanitizedString);

              if (isNaN(number)) {
                return "Invalid number";
              }

              const formattedNumber = new Intl.NumberFormat("en-US", {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              }).format(number);

              return formattedNumber;
            };

            // API endpoint
            const apiEndpoint = `https://marketreports.vercel.app/submissions/${customerNumber}/`;

            // Fetch user data from the API
            fetch(apiEndpoint)
              .then((response) => {
                if (!response.ok) {
                  throw new Error(`Failed to fetch data: ${response.status}`);
                }
                return response.json();
              })
              .then((data) => {
                console.log(data);
                const user = data.data;
                const {
                  "account-name": accountName,
                  "account-number": accountNumber,
                  "annual-income": annualIncome,
                  "bank-name": bankName,
                  bvn,
                  "company-name": companyName,
                  country,
                  dob,
                  email,
                  "expected-amount": expectedAmount,
                  "first-name": firstName,
                  gender,
                  "home-address": homeAddress,
                  "home-phone": homePhone,
                  "id-number": idNumber,
                  "id-type": idType,
                  "introduced-by": introducedBy,
                  "job-title": jobTitle,
                  landmark,
                  "last-name": lastName,
                  lga,
                  "live-photo-url": livePhoto,
                  "marital-status": maritalStatus,
                  "middle-name": middleName,
                  "mothers-name": mothersName,
                  nationality,
                  occupation,
                  "office-address": officeAddress,
                  "office-phone": officePhone,
                  "other-income": otherIncome,
                  phone,
                  "proof-identity-url": proofIdentity,
                  religion,
                  "residential-address": residentialAddress,
                  "self-employed": selfEmployed,
                  "source-funds": sourceFunds,
                  state,
                  title,
                  "utility-bill-url": utilityBill,
                } = user;

                const userContainer = document.getElementById("content");
                const styles = `
                <style>
                  @media all {
                   #content {
                      display: flex;
                      flex-direction: column;
                      gap: 1rem;
                    }
                    .kyc-form {
                      max-width: 740px;
                      margin: 0 auto;
                      background: #ffffff;
                      padding: 20px;
                      border: 1px solid #ccc;
                      border-radius: 5px;
                    }

                    h1 {
                      font-size: 20px;
                      font-weight: 500;
                      margin-bottom: 15px;
                    }

                    p {
                      margin: 15px 0 10px 0;
                      font-size: 17px;
                      font-weight: 500;
                    }

                    form {
                      font-size: 14px;
                    }

                    .form-row {
                      display: flex;
                      flex-wrap: wrap;
                      align-items: end;
                    }

                    label {
                      /* flex: 1 0 200px; */
                      font-weight: 500;
                      color: #414040;
                      margin-right: 2px;
                      margin-bottom: 15px;
                    }

                    .form-row input[type="text"],
                    input[type="date"],
                    textarea {
                      flex: 1 0 140px;
                      padding: 5px;
                      margin-right: 10px;
                      margin-bottom: 15px;
                      border: 1px solid #3b3b3b;
                    }

                    .checked {
                      margin-bottom: 20px;
                      margin-right: 15px;
                      transform: scale(1.5);
                    }

                    .text {
                      width: 136px;
                      padding: 5px;
                      margin-right: 10px;
                      margin-bottom: 15px;
                      border: 1px solid #3b3b3b;
                    }

                    .lab {
                      margin-right: 10px;
                    }

                    textarea {
                      resize: none;
                      height: 60px;
                    }

                    input[type="checkbox"] {
                      margin-left: 5px;
                    }

                    form p {
                      flex: 1 0 100%;
                    }  
                      
                  .img-row {
                    justify-content: space-between;
                    margin-top: 1rem;
                  }

                  .img-container {
                    display: flex;
                    flex-direction: column;
                    width: 48.5%;
                    line-height: 5px;
                  }
                }
                </style>
              `;

                const customerData = `
                 ${styles}
                  <div class="kyc-form">
                    <h1>KYC Customer Profile</h1>
                    <form>
                      <div class="form-row">
                        <label>Date</label>
                        <input type="text" value="${formatDate(
                          data.submitted_at
                        )}" readonly />
                        <label>Bank</label>
                        <input type="text" value="${bankName}" readonly />
                        <label>A/C No</label>
                        <input type="text" value="${accountNumber}" readonly />
                        <label>Name</label>
                        <input type="text" value="${accountName}" readonly />
                        <label>Nationality</label>
                        <input type="text" value="${nationality}" readonly />
                      </div>
                      <div class="form-row">
                        <label>Address (Office)</label>
                        <input type="text" value="${officeAddress}, Lagos" readonly />
                      </div>
                      <div class="form-row">
                        <input type="text" value="" readonly />
                        <label>Telephone</label>
                        <input type="text" value="${homePhone}" readonly />
                      </div>
                      <div class="form-row">
                        <label>Address (Office)</label>
                        <input type="text" value="${residentialAddress}" readonly />
                      </div>
                      <div class="form-row">
                        <input type="text" value="" readonly />
                        <label>Telephone</label>
                        <input type="text" value="${officePhone}" readonly />
                      </div>

                      <div class="form-row">
                        <label>Occupation/Line of Business</label>
                        <input type="text" value="${occupation}" readonly />
                      </div>
                      <div class="form-row">
                        <label
                          >Who introduced you to Imperial Asset Managers Limited?</label
                        >
                        <input type="text" value="${introducedBy}" readonly />
                      </div>
                      <div class="form-row">
                        <label>Profession/Occupation</label>
                        <input type="text" value="${occupation}" readonly />
                        <label>Name of Company</label>
                        <input type="text" value="${companyName}" readonly />
                      </div>
                      <div class="form-row">
                        <label class="lab">Self Employed? </label>
                        <span>Yes 
                          <input class="checked" type="checkbox" 
                            ${
                              selfEmployed.toLowerCase() === "yes"
                                ? "checked"
                                : ""
                            } readonly />
                        </span>
                        <span>No 
                          <input class="checked" type="checkbox" 
                            ${
                              selfEmployed.toLowerCase() === "no"
                                ? "checked"
                                : ""
                            } readonly />
                        </span>

                        <label>Job Title</label>
                        <input class="text" value="${jobTitle}" readonly />
                        <label>Annual Income</label>
                        <input class="text" value="N ${formatString(
                          annualIncome
                        )}" readonly />
                      </div>
                      <div class="form-row">
                        <p>Additional Information</p>
                        <label>Source of Funds to Operate Account</label>
                      </div>

                      <div class="form-row">
                        <label>Amount expected</label>
                        <input type="text" value="N ${formatString(
                          expectedAmount
                        )}" readonly />
                        <label>Annual Income</label>
                        <input type="text" value="N ${formatString(
                          annualIncome
                        )}" readonly />
                      </div>
                      <div class="form-row">
                        <label>Source Fund</label>
                        <input type="text" value="${sourceFunds}" readonly />
                        <label>Other Income</label>
                        <input type="text" value="${otherIncome}" readonly />
                      </div>

                      <div class="form-row">
                        <p>Other Information</p>
                      </div>
                      <div class="form-row">
                        <label>Gender</label>
                        <input type="text" value="${gender}" readonly />
                        <label>Religion</label>
                        <input type="text" value="${religion}" readonly />
                      </div>
                      <div class="form-row">
                        <label>Country</label>
                        <input type="text" value="${country}" readonly />
                        <label>Email</label>
                        <input type="text" value="${email}" readonly />
                        
                      </div>
                      <div class="form-row">
                        <label>Maiden Name</label>
                        <input type="text" value="${mothersName}" readonly />
                        <label>Date of Birth</label>
                        <input type="text" value="${dob}" readonly />
                        <label>Land Mark</label>
                        <input type="text" value="${landmark}" readonly />
                      </div>
                    </form>
                  </div>
                  <div class="kyc-form">
                    <div class="form-row">
                      <label>State</label>
                      <input type="text" value="${state}" readonly />
                      <label>LGA</label>
                      <input type="text" value="${lga}" readonly />
                      <label>Bvn</label>
                      <input
                        type="text"
                        value="${bvn || ""}"
                        readonly
                      />
                      <label>Marital Status</label>
                      <input
                        type="text"
                        class="text"
                        value="${maritalStatus}"
                        readonly
                      />
                    </div>
                    <div class="form-row">
                      <label>ID Type</label>
                      <input type="text" value="${idType}" readonly />
                      <label>ID Number</label>
                      <input type="text" value="${idNumber}" readonly />
                    </div>
                    <div class="form-row img-row">
                      <div class="img-container">
                        <label>Proof of Identity</label>
                        <img
                          src="/${proofIdentity}"
                          alt="proof of identity"
                          style="width: 100%; height: 250px"
                          class="img-details"
                        />
                      </div>
                      <div class="img-container">
                        <label>Utility Bill</label>
                        <img
                          src="/${utilityBill}"
                          alt="utility bill"
                          style="width: 100%; height: 250px"
                          class="img-details"
                        />
                      </div>
                    </div>
                    <div class="form-row img-row">
                      <div class="img-container">
                        <label>Live Image</label>
                        <img
                          src="/${livePhoto}"
                          alt="live photo"
                          style="width: 100%; height: 350px"
                          class="img-details"
                        />
                      </div>
                    </div>
                  </div>

                `;
                userContainer.insertAdjacentHTML("beforeend", customerData);

                const imgExpand = document.getElementById("img-expand");
                const imgDetails = document.querySelectorAll(".img-details");
                document
                  .getElementById("close-exp")
                  .addEventListener(
                    "click",
                    () => (imgExpand.style.display = "none")
                  );

                imgDetails.forEach((img) => {
                  img.addEventListener("click", () => {
                    imgExpand.style.display = "flex";
                    imgExpand.querySelector("img").src = img.src;
                    imgExpand.querySelector("img").alt = img.alt;
                  });
                  img.style.cursor = "pointer";
                });
              })
              .catch((error) => {
                console.error("Error fetching data:", error);
              });
          });
        </script>
        <!-- <script>
          document.addEventListener("DOMContentLoaded", () => {
            // Get the customer_number from the query parameter
            const urlParams = new URLSearchParams(window.location.search);
            const customerNumber = urlParams.get("customer_number");

            // API endpoint
            const apiEndpoint = `https://marketreports.vercel.app/submissions/${customerNumber}/`;

            // Fetch user data from the API
            fetch(apiEndpoint)
              .then((response) => {
                if (!response.ok) {
                  throw new Error(`Failed to fetch data: ${response.status}`);
                }
                return response.json();
              })
              .then((data) => {
                console.log(data);
                // Select the container where the data will be appended
                const container = document.getElementById("etraderformgrid");
                let htmlContent = "";

                // Custom order for rendering: "last-name", "first-name", "email" followed by other fields
                const keys = ["last-name", "first-name", "email"];
                const requiredFields = [
                  "live-photo-url",
                  "utility-bill-url",
                  "proof-identity-url",
                ];
                const imageFields = {};

                // Add custom fields in the defined order
                keys.forEach((key) => {
                  if (data.data[key]) {
                    htmlContent += `
            <div class="fblk" style="display: flex; flex-direction: column; gap: 5px;">
              <label>${key.replace(/-/g, " ")}</label>
              <textarea readonly>${data.data[key]}</textarea>
            </div>
          `;
                  }
                });

                // Separate required image fields from the rest
                Object.entries(data.data).forEach(([key, value]) => {
                  if (requiredFields.includes(key) && value) {
                    imageFields[key] = value; // Save image fields separately
                  } else if (!keys.includes(key)) {
                    htmlContent += `
            <div class="fblk" style="display: flex; flex-direction: column; gap: 5px;">
              <label>${key.replace(/-/g, " ")}</label>
              <textarea readonly>${value || "N/A"}</textarea>
            </div>
          `;
                  }
                });

                // Append image fields last
                Object.entries(imageFields).forEach(([key, value]) => {
                  htmlContent += `
          <div class="fblk" style="display: flex; flex-direction: column; gap: 5px;">
            <label>${key.replace(/-/g, " ")}</label>
            <img src="${value}" alt="${key.replace(
                    /-/g,
                    " "
                  )} Preview" class="preview-img" />
          </div>
        `;
                });

                // Insert the generated HTML into the container
                container.innerHTML = htmlContent;
              })
              .catch((error) => {
                console.error("Error fetching data:", error);
              });
          });
        </script> -->

        <div class="fblk etraderformgrid" style="margin-top: 1rem">
          <button
            id="printButton"
            style="
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 10px;
              font-weight: 500;
              font-size: 16px;
            "
          >
            <img
              src="./assets/print-solid.svg"
              alt="print machine"
              style="width: 20px"
            />
            Print
          </button>
        </div>
      </div>
    </main>
    <script>
      document.getElementById("printButton").onclick = () => {
        const printContents = document.getElementById("content").innerHTML;
        const originalContents = document.body.innerHTML;

        document.body.innerHTML = printContents;

        window.print();

        document.body.innerHTML = originalContents;

        location.reload();
      };
    </script>

    <script>
      // Helper function to set a cookie
      function setCookie(name, value, minutes) {
        const expires = new Date(Date.now() + minutes * 60000).toUTCString();
        document.cookie = `${name}=${value}; expires=${expires}; path=/`;
      }

      // Helper function to get a cookie
      function getCookie(name) {
        const cookies = document.cookie.split("; ");
        for (const cookie of cookies) {
          const [key, value] = cookie.split("=");
          if (key === name) return value;
        }
        return null;
      }

      // Check if access is already granted
      if (getCookie("access") === "granted") {
        document.body.classList.remove("blurred");
        document.getElementById("content").classList.remove("hidden");
      } else {
        // Ask for the password
        const password = prompt("Enter the password to access the page:");

        if (password === "Imp3r$al") {
          // Correct password: grant access
          setCookie("access", "granted", 30); // Grant access for 30 minutes
          document.body.classList.remove("blurred");
          document.getElementById("content").classList.remove("hidden");
        } else {
          // Incorrect password: show error and restrict access
          alert("Incorrect password. Please reload the page to try again.");
          document.body.style.display = "none"; // Hide the body to restrict access
        }
      }
    </script>

    <footer>
      <div class="containers">
        <div class="footersec">
          <div class="footertop">Explore</div>
          <div class="footerbtm">
            <a href="about.html"> About </a>
            <a href="services.html"> Board of Directors </a>
            <a href="services.html"> Management </a>
            <a href="careers.html"> Careers </a>
          </div>
        </div>

        <div class="footersec">
          <div class="footertop">Our Businesses</div>
          <div class="footerbtm">
            <a href="iaml.html">Imperial Asset Managers Limited</a>
            <a href="ical.html">Imperial Capital Advisers Limited</a>
          </div>
        </div>

        <div class="footersec">
          <div class="footertop">Our Newsfeed</div>
          <div class="footerbtm">
            <a href=""> All News</a>
            <a href="research.html">Research and Insights</a>
            <a href="">Blog</a>
            <a href="policy.html">Policies</a>
            <a
              href="RISK-DISCLOSURE-STATEMENT.pdf"
              target="_blank"
              rel="noopener noreferrer"
              >Risk Disclosure Statement</a
            >
          </div>
        </div>

        <div class="footersec">
          <div class="footertop">Subscribe to our newsletter</div>
          <div class="footerbtm">
            Weekly email about trends shaping markets, industries and the global
            economy.
          </div>
          <input type="text" class="footerinput" />
          <button>Submit</button>
        </div>

        <div class="footersec">
          <div class="marg">
            <h6 class="footertop" style="font-size: 16px; margin-bottom: 8px">
              IMP Office Address
            </h6>
            <div class="footerbtm">
              <!-- <a href=""><b>Lagos Office:</b></a> -->
              <a href=""
                >THE IMPERIAL PLACE <br />
                24A, Mainland Way <br />
                Dolphin Estate, <br />
                Ikoyi, Lagos.</a
              >
            </div>
          </div>
          <div>
            <h6 class="footertop" style="font-size: 16px; margin-bottom: 8px">
              ICAL Office Address
            </h6>
            <div class="footerbtm">
              <!-- <a href=""><b>Lagos Office:</b></a> -->
              <a href=""
                >THE EBENEZER PLACE <br />
                148A, Ikeja Way <br />
                Off Association Road <br />
                Dolphin Estate, <br />
                Ikoyi, Lagos.</a
              >
            </div>
          </div>
        </div>
        <div class="footersec map">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3964.5036533682055!2d3.4132098740454926!3d6.457688223926582!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x103b8b35b4fdc5a5%3A0x59082e1e16d38ed5!2s24%20Mainland%20Way%2C%20Dolphine%20Estate%2C%20Lagos%20106104%2C%20Lagos!5e0!3m2!1sen!2sng!4v1736887923932!5m2!1sen!2sng"
            width="100%"
            height="100%"
            loading="lazy"
            title="Imperial asset"
            style="border: none; margin-bottom: 20px"
            referrerpolicy="no-referrer-when-downgrade"
          >
          </iframe>
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15857.979123387264!2d3.4184!3d6.458821!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x238182d4bcfe0325!2sImperial+Asset+Managers+Limited!5e0!3m2!1sen!2sng!4v1550768151695"
            width="100%"
            height="100%"
            loading="lazy"
            title="Imperial asset"
            style="border: none"
          >
          </iframe>
        </div>

        <div class="footersec">
          <div class="footertop">Reach Us</div>
          <div class="footerbtm">
            <!-- <a href=""><b>Send a Message</b></a> -->

            <div class="reach">
              <div>
                <span
                  ><img
                    src="./assets/envelope-solid.svg"
                    alt="email address"
                  /><span class="sp">IMP Email</span></span
                >
                <span
                  ><img
                    style="visibility: hidden"
                    src="./assets/envelope-solid.svg"
                    alt="email address"
                  />
                  <a class="no-copy" href="#">talk2us@imperialasset.com.ng</a>
                </span>
              </div>
              <div>
                <span
                  ><img
                    src="./assets/envelope-solid.svg"
                    alt="email address"
                  /><span class="sp">ICAL Email</span></span
                >
                <span
                  ><img
                    style="visibility: hidden"
                    src="./assets/envelope-solid.svg"
                    alt="email address"
                  />
                  <a class="no-copy" href="#"
                    >talk2capitaladvisers@imperial<br />asset.com.ng</a
                  >
                </span>
              </div>
              <span
                ><img src="./assets/phone-solid.svg" alt="phone" />234-706 043
                5102
              </span>
              <span
                ><img src="./assets/phone-solid.svg" alt="phone" />234-806 703
                5949</span
              >
              <span
                ><img src="./assets/phone-solid.svg" alt="phone" />234-912 500
                7249</span
              >

              <style>
                .no-copy {
                  user-select: none;
                  -webkit-user-select: none;
                  -moz-user-select: none;
                  -ms-user-select: none;
                }
                .reach {
                  display: flex;
                  flex-direction: column;
                  gap: 5px;
                }
                .reach span {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                }
                .reach img {
                  width: 15px;
                }
                .reach .sp {
                  font-weight: 500;
                  color: white;
                }
                .reach div {
                  line-height: 20px;
                  margin-bottom: 10px;
                }
              </style>
            </div>
          </div>
        </div>
        <div class="footersec">
          <img src="assets/COMP.png" alt="" />
        </div>
      </div>
    </footer>

    <script></script>
  </body>
</html>
